# Stress Test: Rapid Navigation
# Tests app stability under rapid screen transitions
# Can expose memory leaks and unmount/mount race conditions

appId: com.veloq.app
---
- launchApp:
    clearState: true

# Dismiss any system alerts
- runFlow:
    when:
      visible: "Not Now"
    commands:
      - tapOn: "Not Now"

- extendedWaitUntil:
    visible:
      id: "login-screen"
    timeout: 30000

- tapOn:
    id: "login-demo-button"

- extendedWaitUntil:
    visible:
      id: "home-screen"
    timeout: 15000

# Rapid tab switching (5 full cycles)
- repeat:
    times: 5
    commands:
      - openLink: "veloq://fitness"
      - openLink: "veloq://training"
      - openLink: "veloq://map"
      - openLink: "veloq://"

# Rapid secondary screen access
- repeat:
    times: 3
    commands:
      - openLink: "veloq://settings"
      - openLink: "veloq://about"
      - openLink: "veloq://wellness"
      - openLink: "veloq://routes"
      - openLink: "veloq://stats"
      - openLink: "veloq://"

# Rapid activity detail access (different activities)
- repeat:
    times: 5
    commands:
      - openLink: "veloq://activity/demo-0"
      - openLink: "veloq://activity/demo-1"
      - openLink: "veloq://activity/demo-2"
      - openLink: "veloq://"

# Verify we end up on home and app is still responsive
# Extended timeout as app may need time to settle after rapid navigation
- extendedWaitUntil:
    visible:
      id: "home-screen"
    timeout: 30000

- extendedWaitUntil:
    visible:
      id: "home-activity-list"
    timeout: 15000

- takeScreenshot: "stress-navigation-rapid-complete"
