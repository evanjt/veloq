# Stress Test: Map View Toggle Buttons
# Rapidly toggles activity/route/section buttons and sport filters

appId: com.veloq.app
tags:
  - tier3
---
- runFlow:
    file: helpers/setup-demo-mode.yaml

- runFlow:
    file: helpers/navigate-to-map.yaml

# Wait for map controls to load
- extendedWaitUntil:
    visible:
      id: "map-toggle-activities"
    timeout: 10000
    optional: true

# Stress test: Rapidly toggle activity layer (10 times)
- repeat:
    times: 10
    commands:
      - tapOn:
          id: "map-toggle-activities"
          optional: true

# Stress test: Rapidly toggle route layer (10 times)
- repeat:
    times: 10
    commands:
      - tapOn:
          id: "map-toggle-routes"
          optional: true

# Stress test: Rapidly toggle section layer (10 times)
- repeat:
    times: 10
    commands:
      - tapOn:
          id: "map-toggle-sections"
          optional: true

# Stress test: Rapidly toggle heatmap (10 times)
- repeat:
    times: 10
    commands:
      - tapOn:
          id: "map-toggle-heatmap"
          optional: true

# Mixed rapid toggling
- repeat:
    times: 5
    commands:
      - tapOn:
          id: "map-toggle-activities"
          optional: true
      - tapOn:
          id: "map-toggle-routes"
          optional: true
      - tapOn:
          id: "map-toggle-sections"
          optional: true
      - tapOn:
          id: "map-toggle-activities"
          optional: true

# Stress test sport type filters
- repeat:
    times: 5
    commands:
      - tapOn:
          id: "map-filter-ride"
          optional: true
      - tapOn:
          id: "map-filter-run"
          optional: true
      - tapOn:
          id: "map-filter-swim"
          optional: true
      - tapOn:
          id: "map-filter-walk"
          optional: true
      - tapOn:
          id: "map-filter-hike"
          optional: true

# Clear all rapidly
- repeat:
    times: 5
    commands:
      - tapOn:
          id: "map-filter-clear"
          optional: true

# Verify map is still responsive
- assertVisible:
    id: "map-screen"

- takeScreenshot: "stress-map-toggles-complete"
